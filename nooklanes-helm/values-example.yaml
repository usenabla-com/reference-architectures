# =============================================================================
# Nooklanes Example Configuration
# Customize this file for your deployment
# =============================================================================

global:
  domain: "enclave.example.com"
  environment: "production"
  storageClass: "fast-ssd"  # Your encrypted storage class

# Enable CUI swimlane for CMMC compliance
swimlanes:
  cuiEnabled: true

# Teleport Configuration
identity:
  enabled: true
  teleport:
    clusterName: "enclave.example.com"
    acme:
      enabled: true
      email: "admin@example.com"
    authentication:
      secondFactor: "webauthn"

# OpenBao with AWS KMS Auto-Unseal
secrets:
  enabled: true
  openbao:
    replicas: 3
    seal:
      type: "awskms"  # Options: awskms, azurekeyvault, gcpckms, transit, shamir
      awskms:
        enabled: true
        region: "us-east-1"
        kmsKeyId: "arn:aws:kms:us-east-1:123456789:key/your-key-id"

# Policy Repository Integration
policy:
  enabled: true
  opal:
    policyRepo:
      url: "git@github.com:yourorg/enclave-policies.git"
      branch: "main"
      sshKey: |
        -----BEGIN OPENSSH PRIVATE KEY-----
        YOUR_SSH_PRIVATE_KEY_HERE
        -----END OPENSSH PRIVATE KEY-----

# Data Tier Configuration
data:
  postgres:
    enabled: true
    instances: 3
    storage:
      size: "100Gi"
      storageClass: "fast-ssd"

  postgresCui:
    enabled: true
    instances: 3
    storage:
      size: "100Gi"
      storageClass: "encrypted-ssd"  # Must support encryption
      encrypted: true

  minio:
    enabled: true
    tenant:
      servers: 4
      volumesPerServer: 2
      volumeSize: "100Gi"

  minioCui:
    enabled: true
    tenant:
      servers: 4
      volumesPerServer: 2
      volumeSize: "100Gi"
      storageClass: "encrypted-ssd"
      encrypted: true

# Observability
observability:
  prometheus:
    enabled: true
    storage:
      size: "100Gi"
  gatus:
    enabled: true
